{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "form-generator",
  "description": "Form code generation utilities",
  "dependencies": [
    "zod"
  ],
  "files": [
    {
      "path": "src/registry/default/lib/form-generator.ts",
      "content": "import * as z from \"zod\";\n\nexport interface FormTemplate {\n  id: string;\n  name: string;\n  description: string;\n  category: \"authentication\" | \"contact\" | \"ecommerce\" | \"survey\" | \"profile\";\n  schema: z.ZodObject<any>;\n  defaultValues: Record<string, any>;\n  fields: FormField[];\n  oauthProviders?: OAuthProvider[];\n}\n\nexport interface FormField {\n  type: \"input\" | \"textarea\" | \"select\" | \"checkbox\" | \"radio\";\n  name: string;\n  label: string;\n  placeholder?: string;\n  description?: string;\n  required?: boolean;\n  options?: Array<{ label: string; value: string }>;\n  inputType?: \"text\" | \"email\" | \"password\" | \"tel\" | \"url\" | \"number\";\n}\n\nexport type OAuthProvider = \"google\" | \"github\" | \"discord\" | \"twitter\";\n\n/**\n * Generate a complete form component with Better Auth integration\n */\nexport function generateFormComponent(config: {\n  formName: string;\n  formDescription: string;\n  fields: FormField[];\n  oauthProviders: OAuthProvider[];\n}): string {\n  const { formName, formDescription, fields, oauthProviders } = config;\n  \n  const hasOAuth = oauthProviders.length > 0;\n  const hasEmail = fields.some(f => f.name === 'email' || f.inputType === 'email');\n  const hasPassword = fields.some(f => f.name === 'password' || f.inputType === 'password');\n  \n  // Generate imports\n  const imports = `\"use client\";\n\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport * as z from \"zod\";\nimport { FormInput } from \"@/components/formcn/form-input\";\nimport { FormTextarea } from \"@/components/formcn/form-textarea\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { toast } from \"sonner\";${hasOAuth ? `\nimport { Github } from \"lucide-react\";\nimport { signIn } from \"@/lib/auth-client\";` : ''}`;\n\n  // Generate Zod schema\n  const schemaFields = fields.map((field) => {\n    if (field.type === \"input\") {\n      let validation = `z.string()`;\n      if (field.inputType === \"email\") validation += `.email(\"Invalid email address\")`;\n      if (field.required) validation += `.min(1, \"${field.label} is required\")`;\n      else validation += `.optional()`;\n      return `  ${field.name}: ${validation},`;\n    }\n    if (field.type === \"textarea\") {\n      let validation = `z.string()`;\n      if (field.required) validation += `.min(1, \"${field.label} is required\")`;\n      else validation += `.optional()`;\n      return `  ${field.name}: ${validation},`;\n    }\n    if (field.type === \"checkbox\") {\n      return `  ${field.name}: z.boolean()${field.required ? `.refine((val) => val === true, { message: \"Required\" })` : `.optional()`},`;\n    }\n    return `  ${field.name}: z.any(),`;\n  }).join('\\n');\n\n  const schema = `\nconst formSchema = z.object({\n${schemaFields}\n});\n\ntype FormValues = z.infer<typeof formSchema>;`;\n\n  // Generate component\n  const componentName = formName.replace(/\\s+/g, '') + 'Form';\n  const defaultValues = fields.map(f => `      ${f.name}: ${f.type === \"checkbox\" ? \"false\" : '\"\"'},`).join('\\n');\n  \n  const formFields = fields.map((field) => {\n    if (field.type === \"input\") {\n      return `          <FormInput\n            control={form.control}\n            name=\"${field.name}\"\n            label=\"${field.label}\"\n            type=\"${field.inputType || \"text\"}\"\n            placeholder=\"${field.placeholder || \"\"}\"${field.description ? `\n            description=\"${field.description}\"` : ''}${field.required ? `\n            required` : ''}\n          />`;\n    }\n    if (field.type === \"textarea\") {\n      return `          <FormTextarea\n            control={form.control}\n            name=\"${field.name}\"\n            label=\"${field.label}\"\n            placeholder=\"${field.placeholder || \"\"}\"${field.description ? `\n            description=\"${field.description}\"` : ''}${field.required ? `\n            required` : ''}\n          />`;\n    }\n    return `          {/* ${field.type} field for ${field.name} */}`;\n  }).join('\\n\\n');\n\n  const oauthButtons = oauthProviders.map(provider => {\n    const providerName = provider.charAt(0).toUpperCase() + provider.slice(1);\n    if (provider === 'github') {\n      return `          <Button\n            variant=\"outline\"\n            onClick={() => signIn.social({ provider: \"github\" })}\n          >\n            <Github className=\"mr-2 h-4 w-4\" />\n            ${providerName}\n          </Button>`;\n    }\n    if (provider === 'google') {\n      return `          <Button\n            variant=\"outline\"\n            onClick={() => signIn.social({ provider: \"google\" })}\n          >\n            <svg className=\"mr-2 h-4 w-4\" viewBox=\"0 0 24 24\">\n              <path fill=\"currentColor\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n              <path fill=\"currentColor\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n              <path fill=\"currentColor\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n              <path fill=\"currentColor\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n            </svg>\n            ${providerName}\n          </Button>`;\n    }\n    return '';\n  }).join('\\n');\n\n  const component = `\nexport function ${componentName}() {\n  const form = useForm<FormValues>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n${defaultValues}\n    },\n  });\n\n  const onSubmit = async (data: FormValues) => {\n    console.log(\"Form submitted:\", data);\n    toast.success(\"Form submitted successfully!\");\n    // TODO: Add your form submission logic here\n  };\n\n  return (\n    <Card className=\"w-full max-w-md mx-auto\">\n      <CardHeader>\n        <CardTitle>${formName}</CardTitle>\n        <CardDescription>${formDescription}</CardDescription>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n${formFields}\n\n          <Button type=\"submit\" className=\"w-full\">Submit</Button>\n        </form>${hasOAuth ? `\n\n        <div className=\"relative my-4\">\n          <div className=\"absolute inset-0 flex items-center\">\n            <span className=\"w-full border-t\" />\n          </div>\n          <div className=\"relative flex justify-center text-xs uppercase\">\n            <span className=\"bg-background px-2 text-muted-foreground\">\n              Or continue with\n            </span>\n          </div>\n        </div>\n\n        <div className=\"grid grid-cols-${oauthProviders.length} gap-4\">\n${oauthButtons}\n        </div>` : ''}\n      </CardContent>\n    </Card>\n  );\n}`;\n\n  return `${imports}${schema}${component}`;\n}\n\n/**\n * Generate Better Auth configuration\n */\nexport function generateAuthConfig(config: {\n  oauthProviders: OAuthProvider[];\n  hasEmailPassword: boolean;\n}): string {\n  const { oauthProviders, hasEmailPassword } = config;\n  \n  const socialProviders = oauthProviders.map(provider => {\n    return `    ${provider}: {\n      clientId: process.env.${provider.toUpperCase()}_CLIENT_ID!,\n      clientSecret: process.env.${provider.toUpperCase()}_CLIENT_SECRET!,\n    },`;\n  }).join('\\n');\n\n  return `import { betterAuth } from \"better-auth\";\nimport { drizzleAdapter } from \"better-auth/adapters/drizzle\";\nimport { db } from \"@/db\"; // Import your Drizzle database instance\n\nexport const auth = betterAuth({\n  database: drizzleAdapter(db, {\n    provider: \"pg\", // Options: \"pg\", \"mysql\", \"sqlite\"\n  }),${hasEmailPassword ? `\n  emailAndPassword: {\n    enabled: true,\n  },` : ''}${oauthProviders.length > 0 ? `\n  socialProviders: {\n${socialProviders}\n  },` : ''}\n});`;\n}\n\n/**\n * Generate auth client helper\n */\nexport function generateAuthClient(): string {\n  return `import { createAuthClient } from \"better-auth/react\";\n\nexport const { signIn, signOut, signUp, useSession } = createAuthClient({\n  baseURL: process.env.NEXT_PUBLIC_APP_URL || \"http://localhost:3000\",\n});`;\n}\n",
      "type": "registry:lib",
      "target": "lib/form-generator.ts"
    }
  ],
  "type": "registry:lib"
}